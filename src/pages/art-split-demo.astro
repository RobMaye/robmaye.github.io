---
import BaseHead from "../components/BaseHead.astro";
import ThemeToggle from "../components/ThemeToggle.astro";
---

<html lang="en">
  <head>
    <BaseHead title="Split Layout Demo — Rob Maye" description="Halftone flow split header/footer concept." />
    <style>
      .art-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 0;
      }
      .art-bg canvas {
        width: 100%;
        display: block;
      }
      .page-content {
        position: relative;
        z-index: 1;
      }
      /* Transparent spacer at top so the sky art shows through */
      .top-spacer {
        height: 35vh;
      }
      /* Content block has the page bg to cover the sparse middle band */
      .content-block {
        background: var(--content-bg);
      }
      /* Transparent spacer at bottom so the cloud art shows through */
      .bottom-spacer {
        height: 35vh;
      }
    </style>
  </head>
  <body class="bg-stone-50 dark:bg-stone-950 text-stone-900 dark:text-stone-100 min-h-screen">

    <!-- Full image halftone as fixed background -->
    <div class="art-bg" id="art-container">
      <canvas id="art-canvas"></canvas>
    </div>

    <!-- Page content scrolls over the art -->
    <div class="page-content">
      <!-- Transparent top: sky + peak shows through -->
      <div class="top-spacer"></div>

      <!-- Content sits over the sparse horizon band -->
      <div class="content-block px-6 py-16" style="--content-bg: #fafaf9;">
        <div class="max-w-2xl mx-auto">
          <div class="flex items-center justify-between mb-12">
            <h1 class="text-2xl font-semibold tracking-tight">Rob Maye</h1>
            <ThemeToggle />
          </div>

          <div class="space-y-6 text-stone-600 dark:text-stone-400 leading-relaxed">
            <p>
              Building something at the intersection of language and cognition.
              Previously studied Computing at Imperial College London.
            </p>
            <p>
              I write about AI, systems thinking, and the things that matter.
            </p>
            <nav class="flex gap-6 pt-4 text-sm font-medium">
              <a href="/blog" class="text-amber-600 dark:text-amber-400 hover:text-amber-500 transition-colors">Blog</a>
              <a href="/projects" class="text-amber-600 dark:text-amber-400 hover:text-amber-500 transition-colors">Projects</a>
              <a href="/cv" class="text-amber-600 dark:text-amber-400 hover:text-amber-500 transition-colors">CV</a>
            </nav>
          </div>

          <div class="mt-16 space-y-4">
            <h2 class="text-lg font-medium text-stone-900 dark:text-stone-100">Latest</h2>
            <p class="text-stone-500 dark:text-stone-400">Blog posts will appear here.</p>
          </div>
        </div>
      </div>

      <!-- Transparent bottom: clouds show through -->
      <div class="bottom-spacer"></div>
    </div>

    <script>
      import { renderHalftoneFlow } from "../lib/art/halftone-flow";

      const isDark = document.documentElement.classList.contains("dark");
      const bg = isDark ? "#0c0a09" : "#fafaf9";
      const accent: [number, number, number] = isDark ? [251, 191, 36] : [180, 83, 9];

      // Set content bg to match theme
      const contentBlock = document.querySelector(".content-block") as HTMLElement;
      if (contentBlock) {
        contentBlock.style.setProperty("--content-bg", bg);
      }

      const src = "/images/art-sources/candidates/sea-cliffs.png";

      // Render the FULL image — no cropping. The natural bright horizon
      // creates the sparse band. Content sits on top of it.
      renderHalftoneFlow(
        document.getElementById("art-canvas") as HTMLCanvasElement,
        src,
        {
          dotSpacing: 5,
          bgColor: bg,
          accentColor: accent,
          particleCount: 3000,
          flowNoiseScale: 0.003,
          flowSpeed: 0.7,
          colorBleedStrength: 0.85,
          fadeEdge: false,
        }
      );
    </script>
  </body>
</html>
